+++
title = "角色管理"
weight = 3
+++

# 角色管理

角色是一组特定权限的集合。因此，通过给成员分配角色来赋予成员权限。角色只有属于一个层级，给角色分配权限时只能分配相同层级的权限。在一个层级中给成员分配角色时，只能分配相同层级的角色。

![](/docs/user-guide/system-configuration/platform/image/role_permission2.png)

  - **菜单层次**：全局层
  - **菜单路径**：平台设置 > 角色管理
  - **默认角色**：平台管理员

<h2 id="1">角色列表</h2>

列表字段：

- 角色名称：角色名称是根据角色权限的集合定义的。在角色分配中的角色列表里面显示的为角色名称。
- **角色编码**：角色编码具有唯一性，是角色的标识。
- 角色层级:一个角色只能选择一个层级。一共有全局层、组织层、项目层三种层级可供选择。
- 角色来源：角色分为用户自定义角色和预置角色，所以角色来源有自定义和预定义两种。用户自定义角色是用户在角色管理界面所创建的角色。预置角色是系统内置的角色，只能查看预置角色，基于预置角色创建新的角色，不能编辑和停用预置角色。
- 启用状态：是否启用字段有'启用'和'停用'两种值。角色的是否启用字段的值为'启用'时，在角色分配中可以看到该角色，因而可以选择该角色；否则，为'停用'时，在角色分配中不可看到该角色，因而无法选择该角色。

<h2 id="2">角色查询</h2>

可查询字段：

- 角色名称：角色的名称。可以模糊搜索。
- **角色编码**：角色的编码。是角色标识。可以模糊搜索。
- 角色层级：分全局层、组织层、项目层三种。
- 角色来源：分预定义和自定义两种。
- 启用状态：分启用和停用两种。

<h2 id="3">创建角色</h2>

1.点击`创建角色`→![创建角色](/docs/user-guide/system-configuration/platform/image/create_role.png)创建一个角色；

2.输入`角色名称`、`角色层级`、`角色编码`、`角色标签`以及`角色权限`；

必填字段：

- 角色名称：角色的名称应该根据角色权限集合特征定义。
- 角色层级：角色层级分为全局层、组织层、项目层三种。一个角色只能属于一个层级。
- **角色编码**：角色编码具有唯一性，是角色的标识。用户可自定义。角色创建成功后生成的角色编码为`role/层级/custom/用户自定义角色编码`，其中`role`和`custom`为常量，`role`表示角色这个大类，`custom`表示角色来源为用户自定义，即用户在界面创建的角色；`层级`和`用户自定义编码`为变量，`层级`为用户所选的角色层级，`用户自定义角色编码`为用户在角色编码输入框中所填写的值。
- 角色权限：权限层级与角色层级相同。创建角色时，至少要选择一个角色权限。

选填字段：

- 角色标签：用于定义角色的特定逻辑的功能，需与代码开发结合。例如：织时会自动为其分配拥有该角色标签的角色。如组织管理员。
    - project.owner：当用户创建项目时会自动为其分配拥有该角色标签的角色。如项目所有者。
    - gitlab.owner：当给某用户在某项目下分配拥有该标签的角色后，平台会为该用户在gitlab对应的group下分配owner角色。
    - gitlab.developer：当给某用户在某项目下分配拥有该标签的角色后，平台会为该用户在gitlab对应的group下分配developer的角色。

3.点击`创建`完成角色的创建。

<h2 id="4">根据所选角色创建角色</h2>

1.点击列表中的`图标`→ ![详情按钮](/docs/user-guide/system-configuration/platform/image/detail_button.png)，选中`基于该角色创建`；

2.输入`角色名称`、`角色层级`、`角色编码`、`角色标签`以及`角色权限`；
<blockquote class="note">
          可以选择多个角色，基于这些选择的角色创建一个新的角色。但是多选时，选择的角色只能为同一层级，不能为不同的层级。
      </blockquote>

不可填字段：

- 角色层级：新角色的层级与所选角色的层级相同，不可更改。

必填字段：

- 角色名称：角色的名称应该根据角色权限集合特征定义。
- **角色编码**：角色编码具有唯一性，是角色的标识。用户可自定义。角色创建成功后生成的角色编码为`role/层级/custom/用户自定义角色编码`，其中`role`和`custom`为常量，`role`表示角色这个大类，`custom`表示角色来源为用户自定义，即用户在界面创建的角色；`层级`和`用户自定义编码`为变量，`层级`为用户所选的角色层级，`用户自定义角色编码`为用户在角色编码输入框中所填写的值。
- 角色权限：新角色的角色权限为所选角色权限的并集。可以后继删除或添加权限，至少要有一个角色权限。

选填字段：

- 角色标签：用于定义角色的特定逻辑的功能，需与代码开发结合。

3.点击`创建`完成角色的创建。

<h2 id="5">编辑角色</h2>

1.点击列表中的`图标`→ ![详情按钮](/docs/user-guide/system-configuration/platform/image/detail_button.png)，选中`修改`；

2.输入`角色名称`、`角色层级`、`角色编码`、`角色标签`以及`角色权限`；

<blockquote class="note">
        预定义角色不可编辑，只能编辑用户自定义的角色。
      </blockquote>  

不可编辑字段：

- 角色层级：因为权限的层级是根据角色层级而定的，如果角色层级更改，则与之前已选权限的角色层级不同，这与系统的角色-权限关联规则矛盾，所以角色一旦创建成功，角色层级不可更改。
- **角色编码**：因为角色编码具有唯一性，是角色的标识，所以角色一旦创建成功，角色编码不可更改。

可编辑字段：

- 角色名称：应该根据角色的权限特性进行命名，这样分配角色的时候可以直观的选择角色。
- 角色标签：用于定义角色的特定逻辑的功能，需与代码开发结合。
- 角色权限：可以增加或删除角色的权限。

3.点击`保存`完成角色的创建。

<h2 id="6">启用/停用角色</h2>
点击列表中的`图标`→ ![详情按钮](/docs/user-guide/system-configuration/platform/image/detail_button.png)，选中`停用`；

<blockquote class="note">
          预定义角色不可停用，只能启用/停用用户自定义角色。
      </blockquote>
    
- 停用角色：只能停用用户自定义角色。停用角色后，角色状态变为'未启用'。赋予给该角色的权限将失效，即使这个角色已经被分配给了用户。并在角色分配中，不再显示该角色。
- 启用角色：用户自定义角色被停用后，可以再次启用。启用角色后，角色状态变为'启用'。赋予该角色的权限生效。并在角色分配中，显示该角色。
